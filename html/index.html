<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>StellarSt0rm</title>
        <meta name="description" content="Made by StellarStorm, duh." />

        <link rel="stylesheet" href="css/main.css" />

        <script type="module" defer>
            import init from "/pkg/stellarst0rm_github_io.js";

            // Override console.error
            const original_console_error = console.error;

            console.error = function (error_message, ...args) {
                const re = /panicked at (.*?:\d*:\d*):\n*(.*?)\s*Stack/;
                let result = re.exec(error_message);

                if (result !== null) {
                    let file = result[1];
                    let error = result[2];

                    console.log(file, "|", error);
                }

                original_console_error.apply(console, [error_message, ...args]);
            };

            init();
        </script>
    </head>

    <body>
        <script>
            let FF_FOUC_FIX;
        </script>

        <div id="loading">
            <h1>Loading Wasm pkg...</h1>
            <div class="loader"></div>
        </div>

        <div id="content">
            <div id="window_container"></div>

            <!--
                App Launcher: Stores icons for apps, to select/re-open them.
                Status Bar: System clock, etc.

                Left and Right elements are used to visually
                connect App Launcher with the Status Bar.

                App icons are stored in the Center element.
            -->
            <div id="bottom" hidden="true">
                <div id="app_launcher">
                    <left></left>
                    <center></center>
                    <right></right>
                </div>
                <div id="status_bar">
                    <left>
                        <a
                            href="https://github.com/StellarSt0rm/stellarst0rm.github.io"
                            target="_blank"
                            >Version: <span id="version"></span
                        ></a>
                    </left>
                    <center></center>
                    <right></right>
                </div>
            </div>
        </div>
    </body>
</html>
